<h2>Iterators</h2>
<div class="step-text">
<p>As you may know, you can iterate through a collection or an array in several ways. For example, you can use the <code class="language-kotlin">for</code> loop for this purpose. Besides, the Kotlin Standard Library provides a special construction called an <strong>iterator</strong>. You can use both methods, no matter what a collection or an array stores. In this topic, you will learn more about the mechanisms and the use of iterators.</p><h5 id="iterator-and-immutable-collections">Iterator and immutable collections</h5><p>An iterator provides access to collection elements sequentially, regardless of their type. It can be seen as a movable pointer to an element of the collection. </p><p>In order to use an iterator, you should call the <code class="language-kotlin">iterator()</code> function. <code class="language-kotlin">iterator()</code> returns a special object that can iterate over the collection.</p><p>When the variable of an iterator is created, it points to the position <strong>before</strong> the first element of the collection. If you want to move to the next element, call the <code class="language-kotlin">next()</code> function. It returns the current element and moves the iterator's pointer to the next element. The <code class="language-kotlin">hasNext()</code> function can help you to find out if there are any elements left in the iteration: it returns "true" if the iteration still has some elements.</p><p>Iterators can be called for different kinds of collections: <code class="language-kotlin">List</code>, <code class="language-kotlin">Map</code>, and <code class="language-kotlin">Set</code>.</p><p>Let's see an example of its usage with a set:</p><pre><code class="language-kotlin">var set = setOf("cat", "dog", "crocodile", "snake")
var iterator = set.iterator()

while (iterator.hasNext()) {
    print(iterator.next() + " ") // cat dog crocodile snake
}</code></pre><p>Here we have a set of strings, and we create an iterator for this set. We make a loop with the help of functions <code class="language-kotlin">hasNext()</code> and <code class="language-kotlin">next()</code> and print each element of the set. Notice that when the iterator passes through the last element of a collection, it can no longer retrieve elements. If you try to invoke <code class="language-kotlin">next()</code> from the iterator after passing the last element in a collection (or for an empty collection), <code class="language-kotlin">NoSuchElementException</code> will be thrown. In this situation, you should create a new iterator for the collection.</p><p>Below you can see how the iterator moves over collections.</p><p>The start of a collection:</p><p><img alt="start moving the interetor through collections" height="361" src="https://ucarecdn.com/838be3da-1852-4ee4-88ad-5d3bcdc948b0/" width="832"/></p><p>The next step:</p><p><img alt="the next step is to move the interetor through collections" height="337" src="https://ucarecdn.com/994f4322-80f6-42ca-a02c-6fd91e9ecec7/" width="773"/></p><p>The end of a collection:</p><p><img alt="end of moving the interetor through collections" height="304" src="https://ucarecdn.com/d6ffaa5f-e030-44a6-9483-7658cd62608f/" width="696"/></p><p>Instead of using the <code class="language-kotlin">for</code> loop, iterators support the <code class="language-kotlin">forEach()</code> function. This function takes an action and performs it on each entry of the collection. You can use lambda expressions and method references inside it.</p><p>Let's see an example of using the <code class="language-kotlin">forEach()</code> function with a map: </p><pre><code class="language-kotlin">var map = mapOf("John" to "chocolate", "Mary" to "sweets", "Sara" to "marmalade")
var iterator = map.iterator()

iterator.forEach { (key, value) -&gt;
    println("$key likes $value")
}

/*
  John likes chocolate
  Mary likes sweets
  Sara likes marmalade
*/</code></pre><p><code class="language-kotlin">forEach()</code> takes the  <code class="language-kotlin">println()</code> function and outputs each entry of the map.</p><p>As you can see, with an iterator, we iterate through immutable collections and read values, but we can't modify the collection. In the next paragraph, you will learn how you can change a collection with an iterator. </p><h5 id="iterator-and-mutable-collections">Iterator and mutable collections</h5><p>Another special iterator variation is <code class="language-kotlin">MutableIterator</code>. It differs from the previous one in that it works with mutable collections, i.e., with those that can be changed after their creation. <code class="language-kotlin">MutableIterator</code> extends <code class="language-kotlin">Iterator</code> and provides the <code class="language-kotlin">remove()</code> function, which removes the last collection element returned by the iterator. </p><p>An important point in using an iterator (unlike the <code class="language-kotlin">for...in</code> loop) for mutable collections is its ability to change the mutable collection because the standard <code class="language-kotlin">for</code> loop in Kotlin doesn't allow us to do it. </p><pre><code class="language-kotlin">val food = mutableSetOf("donuts", "cakes", "tarts")
val mutableIterator = food.iterator()

mutableIterator.next()
mutableIterator.remove()
println("Result : $food")// Result: [cakes, tarts]
</code></pre><p>As you can see, in order to be able to remove an element from the collection, you need to call <code class="language-kotlin">next()</code> because we can remove only the element returned by the iterator.</p><h5 id="list-iterator">List iterator</h5><p>Lists have a special type of iterator called <code class="language-kotlin">ListIterator</code>. It allows you to iterate through the list in both directions: forward and backward, while iterators for <code class="language-kotlin">Set</code> or <code class="language-kotlin">Map</code> can iterate only forward. Also, <code class="language-kotlin">ListIterator</code> is able to get the positions of the next and previous elements.</p><p>In addition to the common <code class="language-kotlin">Iterator</code> methods, <code class="language-kotlin">ListIterator</code> has the following methods of its own:</p><ul><li><p><code class="language-kotlin">fun nextIndex(): Int</code>  returns the index of the element that would be returned by calling the <code class="language-kotlin">next()</code> function;</p></li><li><p><code class="language-kotlin">fun previous(): T</code> returns the previous element of the list and moves the iterator's pointer backward;</p></li><li><p><code class="language-kotlin">fun hasPrevious(): Boolean</code>  returns "true" if there are elements in the iteration before the current element;</p></li><li><p><code class="language-kotlin">fun previousIndex(): Int</code> returns the index of the element that would be returned by calling the <code class="language-kotlin">previous()</code> function.</p></li></ul><p>Let's see an example:</p><pre><code class="language-kotlin">val strings = listOf("i", "like", "donuts")
val listIterator = strings.listIterator()

println("Iterating forwards:")
while (listIterator.hasNext()) listIterator.next()

println("Iterating backwards:")
while (listIterator.hasPrevious()) {
    print("index: ${listIterator.previousIndex()}")
    println(", value: ${listIterator.previous()}")
}</code></pre><p>Here is the result:</p><pre><code class="language-no-highlight">Iterating forwards:
Iterating backwards:
index: 2, value: donuts
index: 1, value: like
index: 0, value: i</code></pre><p>Firstly, we traversed the list till its end. Then, we iterated through the list again, but now â€“ backwards. As you can see, <code class="language-kotlin">ListIterator</code> can still be used after it reaches the last element.</p><p>Mutable lists have their own version of <code class="language-kotlin">Iterator</code> called <code class="language-kotlin">MutableListIterator</code>. <code class="language-kotlin">MutableListIterator</code> is unique for being able not only to remove elements but also replace them and add new ones while traversing the collection.</p><pre><code class="language-kotlin">val words = mutableListOf("i", "know", "Claire")
val mutableListIterator = words.listIterator()

mutableListIterator.next()
mutableListIterator.next()
mutableListIterator.set("don't know")// i , don't know, Claire
mutableListIterator.add("John")
println(words)// i, don't know, John, Claire</code></pre><p>We moved the iterator's pointer to the third element, and the iterator returned the second element. Then we replaced the second element with the function <code class="language-kotlin">set()</code>. <code class="language-kotlin">set()</code> replaces the last element returned by <code class="language-kotlin">next()</code> or <code class="language-kotlin">previous()</code>. <code class="language-kotlin">add()</code> adds a new element into the list before the element which would be returned by <code class="language-kotlin">next()</code>.</p><h5 id="conclusion">Conclusion</h5><p>The Kotlin Standard Library's <code class="language-kotlin">Iterator</code> provides convenient methods for working with different types of collections. By calling the function <code class="language-kotlin">iterator()</code>, you can get an object of <code class="language-kotlin">Iterator</code> for traversing the collection. </p><p>Generally, <code class="language-kotlin">Iterator</code> provides several methods: the <code class="language-kotlin">forEach</code> method allows performing the given operation on every element of the collection, <code class="language-kotlin">next()</code> allows moving to the next element, and <code class="language-kotlin">hasNext()</code> tells us if there are any elements left in the iteration. <code class="language-kotlin">Iterator</code> is also used for iterating over immutable collections, and its inheritor called <code class="language-kotlin">MutableIterator</code> allows you to remove elements. </p><p>A special iterator implementation <code class="language-kotlin">ListIterator</code> for <code class="language-kotlin">List</code> allows you to iterate the list in both directions, and <code class="language-kotlin">MutableListIterator</code> for mutable lists allows replacing and adding elements during the iteration.</p>
</div>
